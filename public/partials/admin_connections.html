

<div layout="column" layout-fill ng-cloak class="dbb_admin_page">

	<md-content>
		<div ng-repeat="connection in connections">
			<form ng-submit="save(connection)"
				  layout="column">
				<md-card>
					<md-card-title>
						<md-card-title-text>
							<md-input-container flex layout-fill>
							<label for="name-{{connection.name}}" >name</label>
							<input id="name-{{connection.name}}" type="text" ng-model="connection.name" class="form-control" ng-change="connection.needsSave = true" ng-click="$event.stopPropagation()" />
							<md-tooltip md-delays="5">The name of the connection, must be unique.</md-tooltip>
						</md-input-container>
						</md-card-title-text>
					</md-card-title>
					<md-card-content>


						<md-input-container  class="md-block" >
							<label  >plugin</label>
							<md-select  ng-model="connection.plugin"
										ng-change="connection.needsSave = true"
										ng-model-options="{trackBy: '$value._id'}"
										required>
								<md-option ng-value="x" ng-repeat="x in connectionPlugins">{{ x.name }} ( {{x.description}} ) </md-option>
							</md-select>
							<md-tooltip >The connection plugin.</md-tooltip>
							<div class="md-errors-spacer"></div>
						</md-input-container>


						<pluginconfigurator plugin="connection.plugin" value="connection"/>

                        <label ng-if="connection.warning" class="md-warn">{{connection.warning}}</label>

					</md-card-content>
					<md-card-actions layout="row" layout-align="end center">
						
						<md-button class="md-primary"
								   ng-click="delete(connection, $event)">delete
						<md-tooltip >delete the connection</md-tooltip></md-button>

						<md-button type="submit"
									ng-if="connection.needsSave === true">save
						</md-button>
							   
					</md-card-actions>
				</md-card>

			</form>
		</div>
	</md-content>

</div>