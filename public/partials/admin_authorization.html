<h1>Authorization</h1>

<md-tabs md-dynamic-height md-border-bottom>

	<md-tab label="users">
        <md-content class="md-padding">
			
			<div>
				<md-button class="md-primary"
						   ng-click="addUser()">Add user</md-button>
			</div>
			
			<md-list ng-cloak layout="column">
				<md-list-item class="secondary-button-padding" ng-repeat="user in users" layout-align="center stretch" layout-fill layout="column">
					
					<form ng-submit="saveUser(user)" layout-align="center stretch" layout-fill layout="column" layout-padding="10%">
					
						<div layout="row" layout-align="start center">
							<div ng-if="user.isOpen == true" flex="95">
								
								<md-input-container flex layout-fill>
									<label for="name-{{user.name}}" >name </label>
									<input id="name-{{user.name}}" type="text" ng-model="user.name" class="form-control" ng-change="user.needsSave = true" ng-click="$event.stopPropagation()" />
									<md-tooltip >The name of the user</md-tooltip>
								</md-input-container>
								
							</div>
					
							<md-button class="md-button-toggle"
									   ng-click="user.isOpen = !user.isOpen"
									   aria-controls="user-btn-{{user.name}}"
									   flex 
									   aria-expanded="user.isOpen = !user.isOpen">
							
								<div flex layout="row"
									 layout-align="end center" >
									
									<div flex="95">
										{{user.name}}
									</div>
									<span aria-hidden="true" class="fa fa-chevron-down md-toggle-icon"
										  ng-class="{'toggled' : user.isOpen}" ></span>
								</div>
							</md-button>		   
						</div>
							  
						<div ng-show="user.isOpen == true" layout="column">
							  
							<md-input-container flex >
								<label for="email-{{user.name}}" >email </label>
								<input id="email-{{user.name}}" type="text" ng-model="user.name" class="form-control" ng-change="user.needsSave = true"  />
								<md-tooltip >The email address of the user</md-tooltip>
							</md-input-container>  
							  
							<md-chips placeholder="Enter a tag"
									  ng-model="groups"
									  delete-button-label="Remove Tag"
									  delete-hint="Press delete to remove tag"
									  secondary-placeholder="+Tag"
									  md-on-add="groupAddedTo(user, $chip)"
									  md-on-remove="groupRemovedFrom(user, $chip)">
							</md-chips>
							
							<div layout="row" layout-align="end center">
								<md-button class="md-primary"
									   ng-click="deleteUser(user)">delete user</md-button>  
									   
								<md-button class="md-primary"
										   ng-click="resetPwd(user)">reset password</md-button>  
										   
								<input type="submit" value="save"
										ng-if="user.needsSave === true"/>
							</div>
							
						</div>
					
					</form>
					
				</md-list-item>
			
			</md-list>
		  
		  
        </md-content>
    </md-tab>
	
	
	<md-tab label="groups">
        <md-content class="md-padding">
		
			<md-button class="md-primary"
					   ng-click="addGroup()">Add group</md-button>
		
			<md-list ng-cloak>
				<md-list-item class="secondary-button-padding" ng-repeat="group in groups" >
					
					<form ng-submit="saveGroup(group)">
			
						<div layout="row" >
							<md-input-container flex="100" >
								<label for="name-{{group._id}}" >name</label>
								<input type="text" id="name-{{group._id}}" ng-model="group.name" ng-change="group.needsSave = true">
								</input>
								<md-tooltip >The name of the group</md-tooltip>
							</md-input-container>
							
							<md-input-container flex >
								<label for="viewGroup" >view group</label> <br /><br />
								<select id="viewGroup" ng-model="group.level" ng-change="group.needsSave = true">
									<option value="admin">admin</option>
									<option value="edit">edit</option>
									<option value="view">view</option>
									<option value="public">public</option>
								</select>
								<md-tooltip >Select the group that newly registered users will be assigned to.</md-tooltip>
							</md-input-container>
							
							<input type="submit" value="save" 
									ng-if="group.needsSave === true"/>
						
						</div>
						
					</form>
					
				</md-list-item>
			
			</md-list>
        </md-content>
    </md-tab>

</md-tabs>