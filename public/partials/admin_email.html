<h1>Configure email</h1>
<md-tabs md-dynamic-height md-border-bottom>

	<md-tab label="configuration" controlller="AdminEmailController">
        <md-content class="md-padding">
          <form ng-submit="selectEmailplugin(email)">
			
			<label for="emailPlugin" >email processor plugin: </label><br />
			<select id="emailPlugin" 
					ng-model="plugin" 
					ng-options="x.name for x in emailPlugins" >
				<md-tooltip >The plugin used for sending out emails.</md-tooltip>
			</select>
			<br />
			
			<input type="submit" value="Submit" />
		  </form>
		  <ng-include src="emailConfigPartial"></ng-include>
        </md-content>
    </md-tab>
	
	
	<md-tab label="templates" controlller="AdminEmailTemplatesController">
        <md-content class="md-padding">
		
			<md-button class="md-primary"
					   ng-click="addTemplate()">Add template</md-button>
					   
			<md-list ng-cloak>
				<md-list-item class="secondary-button-padding" ng-repeat="template in templates" >
					
					<md-button class="md-button-toggle"
							   ng-click="toggleTemplateDetails()"
							   aria-controls="templates-btn-{{template.name | nospace}}"
							   flex layout="row"
							   aria-expanded="{{isOpen()}}">
						{{template.name}}
						<span aria-hidden="true" class=" pull-right fa fa-chevron-down md-toggle-icon"
							  ng-class="{'toggled' : isOpen()}"></span>
						  
						<md-button class="md-primary"
									ng-click="delete(template, $event)">delete</md-button>
						  
						<form ng-submit="save(template)">			
							<md-input-container  ng-show="isOpen()" flex layout-fill style="margin-top: 20px;">
								<textarea type="text" 
										  id="template-input-{{template.name | nospace}}" 
										  ng-model="content"  
										  ng-change="template.needsSave = true"
										  flex 
										  rows="5"></textarea>
								<md-tooltip >The template content</md-tooltip>
							</md-input-container>
							
							<input type="submit" value="save"
									   ng-if="template.needsSave === true"/>
						</form> 
					</md-button>
					
				</md-list-item>
			
			</md-list>
        </md-content>
    </md-tab>

</md-tabs>